# 운영체제
_____
### 🔴 운영체제란?
사용자와 컴퓨터 하드웨어 사이에서 중계 역할을 하면서, 프로그램의 실행을 관리하고 제어하는 시스템 소프트웨어
_____
### 🔴 컴퓨터 시스템의 범위
- 응용소프트웨어 층
- 운영체제 층
- 컴퓨터 하드웨어 층
_____
### 🔴 스택이란?
운영체제는 프로그램을 실행시킬 때 프로그램마다 다음과 같은 4개의 영역을 제공한다.
![Memory Area](https://velog.velcdn.com/images/dodozee/post/c4fec618-156e-4634-a70f-146a614799d7/image.png)
- 코드 영역 - 프로그램 코드가 적재되는 메모리 영역
- 데이터 영역 - 전역 변수, 정적변수들이 적재되는 영역
- 힙 영역 - 프로그램이 실행 중 동적으로 저장할 데이터를 위한 영역
- 스택 영역 - 함수가 호출될 때 매개변수나 지역 변수, 함수가 실행을 마치고 돌아갈 주소 등을 저장하기 위한 공간

스택은 프로그램의 지역 변수 등을 저장하도록 할당된 메모리 영역으로 다음 내용들이 저장된다.
- 함수의 지역변수들
- 매개변수 값들
- 함수를 마치고 돌아갈 주소
- 함수 코드가 의도적으로 스택에 저장한 값
  
**특별한 메모리나 장치가 컴퓨터에 별도로 있는 것이 아님**
_____
### 🔴 컨텍스트 스위칭
여러 프로세스를 처리해야 하는 상황에서 현재 진행중인 Task(프로세스 혹은 쓰레드)의 상태를 PCB에 저장하고, 다음에 진행할 Task의 상태 값을 읽어 레지스터에 적재하는 과정
> 컨텍스트 : CPU에 들어 있는 레지스터의 값들

**컨텍스트 스위칭을 통해 CPU 사용률을 높일 수 있고 여러 프로세스를 처리할 수 있다.**
_____
### 🔴 커널이란?
**운영체제의 핵심 부분**으로 메모리에 상주하면서 CPU, 캐시, 메모리 등 하드웨어를 관리하고 프로세스의 실행과 중단, 파일 시스템 관리 등
운영체제의 핵심적인 기능을 실행하는 코드와 이들을 관리하기 위해 필요한 프로세스 테이블, 페이지 테이블 등 여러 자료 구조의 집합

다음과 같은 운영체제의 핵심 기능들이 커널 코드에 의해 실행
- 프로세스와 스레드 관리
- 메모리 관리
- 파일 생성, 삭제, 파일 입출력 등 파일 및 파일 시스템 관리
- 디바이스 드라이버를 호출하여 장치 입출력
_____
### 🔴 사용자 공간과 커널 공간
운영체제는 CPU로 액세스할 수 있는 전체 주소 공간을 **사용자 공간**과 **커널 공간**으로 분리하여 운영한다.
- 사용자 공간: 응용프로그램이 적재되고 응용프로그램의 변수가 만들어지고 동적 할당 받는 공간으로 활용하는 공간
- 커널 공간: 커널 코드와 커널 데이터, 그리고 커널 함수들이 실행될 때 필요한 스택 공간, 디바이스 드라이버 등이 탑재되는 공간

✅**사용자 공간과 커널 공간으로 나누는 이유**
응용프로그램으로부터 커널 코드와 데이터를 지키기 위함
_____
### 🔴 프로세스란?
메모리에 적재되어 **실행 중**인 프로그램

💡**실행 중**

CPU에 의해 현재 실행되고 있거나, 준비 상태로 기다리거나, 입출력 등으로 인해 중단되어 CPU로 부터 실행을 대기하고 있는 상태
_____
### 🔴 프로세스 주소 공간
프로세스가 실행 중에 접근할 수 있도록 허용된 주소의 최대 범위로 다음 그림과 같다.
![Process Area](https://velog.velcdn.com/images/rhgurqls00/post/6f24f679-dfca-4e9c-ba2d-1bfc10223d0b/image.png)

**프로세스의 코드는 CPU가 접근할 수 있는 모든 주소 범위에 접근하도록 허용되므로, 사실상 프로세스의 주소 공간은 CPU 주소 공간과 같다.**

힙과 스택 영역의 크기는 정해져 있지 않고 코드 영역과 데이터 영역을 뺀 나머지 공간을 둘이 합쳐 사용한다.
_____
### 🔴 힙 영역과 스택 영역의 차이점
|     | 힙 영역 | 스택 영역 |
|:--- | :--- | :--- |
|저장하는 변수|동적으로 할당된 변수|지역변수, 매개변수, 함수의 리턴값 등|
|크기 결정 순간|런타임(Runtime)|컴파일(Compile)|
|크기 제한|크기가 제한되어 있지 않음 |크기가 제한되어 있음 |
|주소 할당 방향|낮은 주소 -> 높은 주소|높은 주소 -> 낮은 주소|
|장점|큰 데이터 저장 가능, 유연한 메모리 관리 가능|메모리 할당 및 해제가 빠름|
|단점|직접 메모리 관리 필요, 이에 따라 메모리 누수나 조각화 발생 가능|제한된 크기 때문에 스택 오버플로우 발생 가능|
_____
### 🔴 PCB(Process Control Block)이란?
프로세스에 관한 정보를 저장하는 구조체

프로세스 당 하나씩 존재하며 프로세스가 생성될 때 만들어지고 종료되면 삭제

**커널에 의해 생성, 저장, 읽혀지는 등의 관리됨**
_____
### 🔴 프로세스의 생명 주기와 상태 변이
![Process Life Cycle](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbFhNJu%2Fbtr5PREMV2G%2Fmr9OvmKZulcxmSpZYLFjy0%2Fimg.png)

상태 변이는 **커널 코드**에 의해 이루어짐
_____
### 🔴 스레드란?
운영 체제나 프로세스 내에서 실행되는 가장 작은 작업 단위

스레드 출현 목적
- 프로세스 보다 작은 실행 단위 필요
- 프로세스의 생성 및 소멸에 따른 오버헤드 감소
- 빠른 컨텍스트 스위칭
- 프로세스들 사이의 통ㅇ신에 대한 어려움 해소

스레드마다 TCB(Thread Control Block) 생성

![Process and Thread](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FkHGmX%2FbtsaESFpHrp%2F6if2bm4y7XjTg9iT3vnTyK%2Fimg.png)
_____
